(()=>{function e(){console.log("正在打开微信公众号登录页面..."),window.open("https://mp.weixin.qq.com/","_blank")}function o(){const e=window.location.href;console.log("当前页面URL:",e),e.includes("cgi-bin/appmsg")&&e.includes("action=list_video")?(console.log("检测到视频素材管理页，准备注入chrome-debug-uploader.js..."),function(){if(document.getElementById("chrome-debug-uploader-script"))return void console.log("chrome-debug-uploader.js已经注入过，跳过注入");console.log("开始注入chrome-debug-uploader.js..."),t("chrome-debug-uploader.js","视频上传工具")}()):e.includes("cgi-bin/user_tag")&&e.includes("action=get_all_data")?(console.log("检测到用户管理页，准备注入chrome-debug-tag.js..."),function(){if(document.getElementById("chrome-debug-tag-script"))return void console.log("chrome-debug-tag.js已经注入过，跳过注入");console.log("开始注入chrome-debug-tag.js..."),t("chrome-debug-tag.js","用户标签工具")}()):e.includes("mp.weixin.qq.com")&&e.includes("cgi-bin/login")&&console.log("当前为登录页，请登录后继续")}function t(e,o){const t=document.getElementById(`inject-${e}-button`);t&&t.remove(),console.log(`创建${o}注入按钮...`);const n=document.createElement("button");n.id=`inject-${e}-button`,n.textContent=`点击注入${o}`,n.style.position="fixed",e.includes("uploader")?(n.style.top="10px",n.style.backgroundColor="#1aad19"):(n.style.top="60px",n.style.backgroundColor="#07c160"),n.style.right="10px",n.style.zIndex="9999",n.style.padding="10px 20px",n.style.color="white",n.style.border="none",n.style.borderRadius="4px",n.style.cursor="pointer",n.style.fontSize="14px",n.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.15)",n.addEventListener("click",()=>{alert(`请按照以下步骤操作:\n1. 打开文件资源管理器\n2. 找到并打开 ${e} 文件\n3. 复制文件的全部内容\n4. 返回浏览器，按F12打开开发者工具\n5. 切换到控制台(Console)标签页\n6. 粘贴复制的内容并按Enter键运行`);try{console.log("请按F12打开开发者工具并切换到控制台(Console)标签页")}catch(e){console.error("无法自动打开开发者工具:",e)}}),document.body.appendChild(n),l(`已创建${o}注入按钮，请点击按钮查看详细操作步骤`)}function n(){console.log("微信公众号自动注入工具初始化中..."),function(){const t=document.createElement("div");t.id="wechat-mp-control-panel",t.style.position="fixed",t.style.top="20px",t.style.left="20px",t.style.zIndex="9999",t.style.backgroundColor="white",t.style.border="1px solid #e7e7eb",t.style.borderRadius="8px",t.style.padding="15px",t.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.1)";const n=document.createElement("h3");n.textContent="微信公众号自动注入工具",n.style.margin="0 0 10px 0",n.style.fontSize="16px",n.style.color="#333";const l=document.createElement("button");l.textContent="打开微信公众号登录页",l.style.display="block",l.style.width="100%",l.style.padding="8px",l.style.marginBottom="10px",l.style.backgroundColor="#1aad19",l.style.color="white",l.style.border="none",l.style.borderRadius="4px",l.style.cursor="pointer",l.addEventListener("click",e);const s=document.createElement("button");s.textContent="检查当前页面",s.style.display="block",s.style.width="100%",s.style.padding="8px",s.style.marginBottom="10px",s.style.backgroundColor="#07c160",s.style.color="white",s.style.border="none",s.style.borderRadius="4px",s.style.cursor="pointer",s.addEventListener("click",o);const c=document.createElement("div");c.id="wechat-mp-status",c.style.fontSize="12px",c.style.color="#666",c.style.marginTop="10px",c.textContent="状态：等待操作...",t.appendChild(n),t.appendChild(l),t.appendChild(s),t.appendChild(c),document.body.appendChild(t)}(),window.location.href.includes("mp.weixin.qq.com")&&(console.log("当前已在微信公众号页面，开始监测页面URL"),console.log("开始监测页面URL..."),new MutationObserver(()=>{o()}).observe(document,{childList:!0,subtree:!0}),o(),console.log("页面监测已启动")),console.log("微信公众号自动注入工具初始化完成")}function l(e){const o=document.getElementById("wechat-mp-status");o&&(o.textContent="状态："+e),console.log("[状态更新]",e)}console.log("微信公众号自动注入工具已加载"),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",n):n(),window.WechatMpAutoInjector={init:n,openLoginPage:e,checkAndInject:o,updateStatus:l},module.exports={}})();