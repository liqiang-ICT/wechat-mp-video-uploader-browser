(()=>{var e={758:e=>{"use strict";e.exports=require("puppeteer")},785:e=>{"use strict";e.exports=require("readline")},857:e=>{"use strict";e.exports=require("os")},878:(e,t,n)=>{const a=n(896),o=n(928),c=o.join(__dirname,"accounts-data.json");t.initAccountManager=()=>{a.existsSync(c)||a.writeFileSync(c,JSON.stringify([]),"utf8")},t.getAllAccounts=()=>{try{const e=a.readFileSync(c,"utf8");return JSON.parse(e)}catch(e){return console.error(`读取账号数据失败: ${e.message}`),[]}},t.getAccountById=e=>t.getAllAccounts().find(t=>t.id===e)||null,t.addAccount=e=>{try{const n=t.getAllAccounts();return e.id=e.id||`account_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,e.lastLogin=(new Date).toISOString(),n.push(e),a.writeFileSync(c,JSON.stringify(n,null,2),"utf8"),!0}catch(e){return console.error(`添加账号失败: ${e.message}`),!1}},t.updateAccount=(e,n)=>{try{const o=t.getAllAccounts(),s=o.findIndex(t=>t.id===e);return-1!==s&&(o[s]={...o[s],...n},a.writeFileSync(c,JSON.stringify(o,null,2),"utf8"),!0)}catch(e){return console.error(`更新账号信息失败: ${e.message}`),!1}},t.updateAccountLastLogin=e=>t.updateAccount(e,{lastLogin:(new Date).toISOString()}),t.deleteAccount=e=>{try{const n=t.getAllAccounts(),o=n.filter(t=>t.id!==e);return n.length!==o.length&&(a.writeFileSync(c,JSON.stringify(o,null,2),"utf8"),!0)}catch(e){return console.error(`删除账号失败: ${e.message}`),!1}},t.createUserDataDir=e=>{const t=o.join(__dirname,"user-data"),n=o.join(t,e);return a.existsSync(n)||a.mkdirSync(n,{recursive:!0}),n},t.getAccountInfoFromPage=async e=>{try{return await e.evaluate(()=>{let e="未知公众号",t="unknown",n="";const a=document.querySelectorAll(".weui-desktop-person_info .weui-desktop_name, .account_box-body .acount_box-nickname");if(a.length>0)for(const t of a)if(t.textContent&&t.textContent.trim()){e=t.textContent.trim();break}try{t=wx.data.user_name}catch(e){console.error(`获取微信ID失败: ${e.message}`)}const o=document.querySelectorAll(".weui-desktop-person_info .weui-desktop-account__img, .account_box-body .weui-desktop-account__thumb");if(o.length>0)for(const e of o){const t=e.src||"";if(t&&t.includes("http")&&!t.includes("default_avatar")&&!t.includes("placeholder")){n=t;break}}return{name:e,wechatId:t,avatar:n}})}catch(e){return console.error(`从页面获取账号信息失败: ${e.message}`),{name:"未知公众号",wechatId:"unknown",avatar:""}}},t.initAccountManager()},896:e=>{"use strict";e.exports=require("fs")},928:e=>{"use strict";e.exports=require("path")}},t={};function n(a){var o=t[a];if(void 0!==o)return o.exports;var c=t[a]={exports:{}};return e[a](c,c.exports,n),c.exports}const a=n(928),o=n(785),c=n(758),s=n(896),r=n(857),i=n(878),l={headless:!1,delayBetweenActions:3e3,maxRetries:3,timeout:6e4,logFile:a.join(__dirname,"wechat-mp-auto-controller.log"),userDataDir:a.join(__dirname,"user-data")},u=()=>{const e=r.platform();return"darwin"===e?"/Applications/Google Chrome.app/Contents/MacOS/Google Chrome":"win32"===e?"C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe":"linux"===e?"/usr/bin/google-chrome":""};let d="",g=null,m=new Map;const w=e=>{const t=`[${(new Date).toISOString()}] ${e}`;console.log(t),(e=>{const t=`[${(new Date).toISOString()}] ${e}\n`;try{s.appendFileSync(l.logFile,t,"utf8")}catch(e){console.error(`无法写入日志文件: ${e.message}`)}})(e)},p=e=>new Promise(t=>setTimeout(t,e)),y=async e=>{w("请在浏览器中扫码登录微信公众号...");try{w("等待页面跳转以获取登录状态..."),await e.waitForNavigation({waitUntil:"networkidle0",timeout:12e4});const t=e.url().match(/token=([^&]+)/);if(t&&t[1])return d=t[1],w(`成功获取token: ${d}`),w("登录成功！"),!0}catch(e){w(`等待页面跳转超时: ${e.message}`)}w("检查页面内容以确定登录状态...");let t=!1;try{if(e.isClosed())return w("警告：页面已关闭，无法检查登录状态"),!1;t=await e.evaluate(()=>{if(!document||!document.body)return!1;const e=document.body.textContent.toLowerCase();return["首页","素材管理","内容创作","已登录","我的账号"].some(t=>e.includes(t.toLowerCase()))})}catch(t){if(w(`检查登录状态时出错: ${t.message}`),t.message&&t.message.includes("detached Frame")){w("检测到Frame已分离，尝试通过URL检查登录状态...");const t=e.url();if(t.includes("token=")){const e=t.match(/token=([^&]+)/);return e&&e[1]&&(d=e[1],w(`成功获取token: ${d}`)),w("登录成功！"),!0}}return!1}if(t){const t=e.url().match(/token=([^&]+)/);return t&&t[1]&&(d=t[1],w(`成功获取token: ${d}`)),w("登录成功！"),!0}return w("警告：未能确认登录状态。如果您已经登录，请刷新页面并重试。"),!1},h=async e=>{e.on("framenavigated",async()=>{w("检测到页面框架导航事件")}),e.on("load",async()=>{w("检测到页面加载完成事件"),await x(e)}),e.on("domcontentloaded",async()=>{w("检测到DOM内容加载完成事件")})},f=async(e,t)=>{w("开始监测页面URL变化和新标签页创建..."),await h(e),t.on("targetcreated",async e=>{try{if("page"===e.type()){w("检测到新标签页创建");const t=await e.page();t&&(w("为新标签页设置事件监听器"),await h(t))}}catch(e){w(`处理新标签页时出错: ${e.message}`)}}),await new Promise(e=>{const t=o.createInterface({input:process.stdin,output:process.stdout});w("按Enter键退出程序..."),t.on("line",()=>{w("程序退出中..."),t.close(),g.close().then(e)})})},x=async e=>{const t=e.url();w(`当前页面URL: ${t}`),await e.evaluate(()=>{window.lastCheckedTime=Date.now()}),t.includes("cgi-bin/appmsg")&&t.includes("action=list_video")?(w("检测到视频素材管理页，准备执行视频批量上传功能..."),await b(e)):t.includes("cgi-bin/user_tag")&&t.includes("action=get_all_data")?(w("检测到用户管理页，准备执行用户批量打标签功能..."),await _(e)):t.includes("cgi-bin/appmsg")&&t.includes("action=list_card")?(w("检测到草稿箱记录管理页，准备执行草稿箱记录批量管理功能..."),await v(e)):t.includes("cgi-bin/appmsg")&&t.includes("t=media/appmsg_edit_v2")&&t.includes("action=edit")?(w("检测到视频配置页面，准备执行自动配置功能..."),await $(e)):t.includes("mp.weixin.qq.com")&&t.includes("cgi-bin/login")?w("当前为登录页，请登录后继续"):t.includes("videomsg_edit")?w("当前为素材管理编辑页"):(w("当前为其他页面，清除注入标记"),await e.evaluate(()=>{window.chromeDebugUploaderInjected=!1,window.chromeDebugTagInjected=!1,window.chromeDebugConfigAutoInjected=!1}))},$=async e=>{const t=`config-${Date.now()}-${Math.floor(1e3*Math.random())}`;w(`准备注入视频配置自动脚本 - 页面ID: ${t}`);try{const n=e.url();if(!n.includes("cgi-bin/appmsg")||!n.includes("t=media/appmsg_edit_v2")||!n.includes("action=edit"))return void w(`跳过注入 - 非视频配置页面: ${n}`);if(await e.evaluate(()=>window.chromeDebugConfigAutoInjected||!1))return void w("视频配置自动操作脚本在其他页面已经注入过");w("准备注入视频配置自动操作脚本...");const o=a.join(__dirname,"chrome-debug-config-auto.js");if(!s.existsSync(o))throw new Error(`找不到视频配置自动操作脚本文件: ${o}`);const c=s.readFileSync(o,"utf8");await e.evaluate(e=>{window._configPageInstanceId=e},t),await e.evaluate(e=>{const t=document.createElement("script");t.textContent=e,document.head.appendChild(t),window.chromeDebugConfigAutoInjected=!0},c),w("视频配置自动操作脚本注入成功！"),w("脚本将自动执行以下操作："),w("1. 点击留言配置按钮并确认"),w('2. 点击声明按钮，选择"内容来自AI"，点击确认'),w("3. 点击保存按钮完成配置"),async function(e,t){try{const n=6e4,a=1e3;let o=0;for(w(`开始监控配置完成状态 - 页面ID: ${t}`);o<n;){await new Promise(e=>setTimeout(e,a)),o+=a;try{if(await e.evaluate(()=>!0===window._configAutoCompleted))return w(`检测到配置已完成，关闭页面 - 页面ID: ${t}`),await e.close({waitUntil:"networkidle0",timeout:2e3}),void w(`页面已安全关闭 - 页面ID: ${t}`)}catch(e){return w(`监控过程中遇到错误，可能页面已关闭 - 页面ID: ${t}`),void(e.stack&&w(e.stack))}}w(`监控超时，页面未完成配置 - 页面ID: ${t}`)}catch(e){w(`监控配置完成状态时出错: ${e.message}`),e.stack&&w(e.stack)}}(e,t)}catch(e){w(`注入视频配置自动操作脚本失败: ${e.message}`),e.stack&&console.error(e.stack)}};const b=async e=>{try{const t=e.url();if(!t.includes("cgi-bin/appmsg")||!t.includes("action=list_video"))return void w("警告：当前页面不适合注入视频上传脚本，跳过注入");w("准备注入视频上传脚本...");const n=a.join(__dirname,"chrome-debug-uploader.js");if(!s.existsSync(n))throw new Error(`找不到视频上传脚本文件: ${n}`);const o=s.readFileSync(n,"utf8");await e.evaluate(e=>{const t=document.createElement("script");t.textContent=e,document.head.appendChild(t)},o),w("视频上传脚本注入成功！")}catch(e){w(`注入视频上传脚本失败: ${e.message}`)}},v=async e=>{try{const t=e.url();if(!t.includes("cgi-bin/appmsg")||!t.includes("action=list_card"))return void w("警告：当前页面不适合注入草稿箱记录批量管理脚本，跳过注入");w("准备注入草稿箱记录批量管理脚本...");const n=a.join(__dirname,"chrome-debug-card.js");if(!s.existsSync(n))throw new Error(`找不到草稿箱记录批量管理脚本文件: ${n}`);const o=s.readFileSync(n,"utf8");await e.evaluate(e=>{const t=document.createElement("script");t.textContent=e,document.head.appendChild(t)},o),w("文章发表记录批量管理脚本注入成功！")}catch(e){w(`注入文章发表记录批量管理脚本失败: ${e.message}`)}},_=async e=>{try{const t=e.url();if(!t.includes("cgi-bin/user_tag")||!t.includes("action=get_all_data"))return void w("警告：当前页面不适合注入用户标签脚本，跳过注入");w("准备注入用户标签脚本...");const n=a.join(__dirname,"chrome-debug-tag.js");if(!s.existsSync(n))throw new Error(`找不到用户标签脚本文件: ${n}`);const o=s.readFileSync(n,"utf8");await e.evaluate(e=>{const t=document.createElement("script");t.textContent=e,document.head.appendChild(t)},o),w("批量打标签按钮脚本已注入，请点击按钮开始操作")}catch(e){w(`注入用户标签脚本失败: ${e.message}`)}},S=async(e,t,n=l.maxRetries)=>{var a;let o=null;for(let a=1;a<=n;a++)try{w(`尝试执行${t} (第${a}/${n}次尝试)`);const o=await e();return w(`${t}执行成功`),o}catch(e){o=e,w(`尝试${a}执行${t}失败: ${e.message}`),a<n&&(w(`等待${l.delayBetweenActions}毫秒后重试...`),await p(l.delayBetweenActions))}throw new Error(`${t}在${n}次尝试后仍然失败: ${(null===(a=o)||void 0===a?void 0:a.message)||"未知错误"}`)};const C=async(e,t)=>{switch(e){case"manage":w("微信公众号自动控制器启动 - 账号管理模式"),await(async()=>{w("启动账号管理页面...");try{const e=u();g&&g.isConnected()||(g=await c.launch({headless:!1,defaultViewport:null,args:["--start-maximized"],executablePath:e||void 0,timeout:l.timeout,slowMo:100}),g.on("disconnected",()=>{w("浏览器已关闭"),g=null,m.clear()}));const t=await g.newPage(),n=a.join(__dirname,"account-manager.html"),o=s.readFileSync(n,"utf8"),r=i.getAllAccounts(),d=a.join(__dirname,"temp-account-manager.html");s.writeFileSync(d,o,"utf8");const p=t;await p.evaluate(e=>{window.__ACCOUNTS__=e},r),global.accountManagerPage=p,await t.exposeFunction("addNewAccount",async()=>{try{if(await A(),p&&!p.isClosed())try{await p.evaluate(()=>{"function"==typeof window.refreshAccountsList&&window.refreshAccountsList()})}catch(e){w(`刷新账号列表时出错: ${e.message}`)}}catch(e){w(`添加账号过程中出错: ${e.message}`),console.error(e)}}),await t.exposeFunction("switchToAccount",async e=>{try{await C("switch-account",e)}catch(e){w(`切换账号过程中出错: ${e.message}`),console.error(e)}}),await t.exposeFunction("deleteAccount",async e=>{try{if(w(`前端触发删除账号: ${e}`),console.log(`后端接收到删除账号请求，账号ID: ${e}`),!e||"string"!=typeof e)throw new Error(`无效的账号ID: ${e}`);if(console.log(`当前活跃账号数量: ${m.size}`),console.log("准备调用handleAction删除账号"),await C("delete-account",e),console.log("handleAction删除账号完成"),console.log("准备刷新账号列表"),global.accountManagerPage&&!global.accountManagerPage.isClosed()){console.log("账号管理页面有效，尝试刷新列表");try{const e=i.getAllAccounts();await global.accountManagerPage.evaluate(e=>{window.__ACCOUNTS__=e,console.log("重新注入账号数据:",e)},e),await global.accountManagerPage.evaluate(()=>{console.log("执行前端refreshAccountsList函数"),"function"==typeof window.refreshAccountsList?window.refreshAccountsList():console.error("window.refreshAccountsList函数不存在")}),console.log("账号列表刷新完成")}catch(e){w(`刷新账号列表时出错: ${e.message}`),console.error("刷新账号列表错误:",e)}}else console.log("账号管理页面已关闭或无效，无法刷新列表")}catch(e){throw w(`删除账号过程中出错: ${e.message}`),console.error("删除账号错误:",e),e}}),await t.exposeFunction("getLatestAccounts",async()=>{try{w("前端请求获取最新账号数据");const e=i.getAllAccounts();return w(`成功获取最新账号数据，共${e.length}个账号`),e}catch(e){return w(`获取最新账号数据失败: ${e.message}`),console.error("获取最新账号数据错误:",e),[]}}),await t.goto(`file://${d}`,{timeout:l.timeout}),await t.evaluate(e=>{window.__ACCOUNTS__=e,"function"==typeof window.refreshAccountsList&&window.refreshAccountsList()},r);const y=(e,t)=>new Promise(e=>{const n=Date.now(),a=setInterval(()=>{Date.now()-n>t&&(clearInterval(a),w("等待浏览器关闭超时"),e());try{g.targets().some(e=>"page"===e.type()&&"about:blank"!==e.url())||(clearInterval(a),e())}catch(t){clearInterval(a),e()}},1e3)});await y(g,36e5);try{s.unlinkSync(d)}catch(e){w(`警告：无法删除临时文件: ${e.message}`)}}catch(e){w(`启动账号管理页面失败: ${e.message}`),console.error(e)}})();break;case"add-account":w("微信公众号自动控制器启动 - 添加新账号模式"),await A();break;case"switch-account":if(!t)return void w("错误：切换账号时需要提供账号ID");w(`微信公众号自动控制器启动 - 切换到账号: ${t}`),await I(t);break;case"delete-account":if(!t)return void w("错误：删除账号时需要提供账号ID");w(`删除账号: ${t}`);if(i.deleteAccount(t)){if(w("账号删除成功"),m.has(t))try{const e=m.get(t);e&&e.page&&!e.page.isClosed()&&await e.page.close(),m.delete(t),w(`已关闭并移除账号 ${t} 的页面引用`)}catch(e){w(`清理账号页面引用时出错: ${e.message}`)}}else w("账号删除失败");await p(2e3);break;default:w(`未知操作: ${e}`),w("可用操作: manage, add-account, switch-account, delete-account")}},A=async()=>{try{const e=u();e||w("警告：未能自动检测到系统Chrome路径，请确保Chrome已安装");const t=`account_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,n=i.createUserDataDir(t);w(`为新账号创建用户数据目录: ${n}`),w("创建新的浏览器实例用于新账号登录...");const a=await S(async()=>await c.launch({headless:l.headless,defaultViewport:null,args:["--start-maximized",`--user-data-dir=${n}`],executablePath:e||void 0}),"启动浏览器实例"),o=await a.newPage();await o.goto("https://mp.weixin.qq.com/"),await p(2e3),w("请在新打开的浏览器窗口中扫码登录...");if(!await y(o))return w("登录失败或未检测到登录状态"),await p(5e3),void await a.close();w("登录成功，正在获取公众号信息...");const s=await i.getAccountInfoFromPage(o),r={id:t,name:s.name,wechatId:s.wechatId,avatar:s.avatar,userDataDir:n,lastLogin:(new Date).toISOString()};i.addAccount(r)?(w(`账号信息保存成功: ${s.name} (${s.wechatId})`),w(`账号数据目录: ${n}`)):w("账号信息保存失败"),m.set(t,{page:o,browser:a}),await S(async()=>{await o.evaluate(e=>{const t=document.createElement("div");t.id="auto-controller-panel",t.style.position="fixed",t.style.top="20px",t.style.left="20px",t.style.zIndex="9999",t.style.backgroundColor="white",t.style.border="1px solid #e7e7eb",t.style.borderRadius="8px",t.style.padding="15px",t.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.1)",t.style.maxWidth="350px",t.style.fontSize="14px",t.style.color="#333",t.style.fontFamily="-apple-system, BlinkMacSystemFont, sans-serif";const n=document.createElement("h4");n.textContent="微信公众号自动控制器",n.style.margin="0 0 15px 0",n.style.fontSize="16px",n.style.color="#1aad19";const a=document.createElement("div");a.id="status-info",a.textContent="状态：账号添加完成，登录信息已保存",a.style.marginBottom="15px",a.style.fontSize="13px",a.style.color="#666";const o=document.createElement("div");o.style.display="flex",o.style.gap="10px",o.style.flexWrap="wrap";const c=document.createElement("button");c.textContent="刷新页面",c.style.padding="6px 12px",c.style.backgroundColor="#07c160",c.style.color="white",c.style.border="none",c.style.borderRadius="4px",c.style.cursor="pointer",c.style.fontSize="12px",c.style.transition="background-color 0.3s",c.addEventListener("mouseover",()=>{c.style.backgroundColor="#06ad56"}),c.addEventListener("mouseout",()=>{c.style.backgroundColor="#07c160"}),c.addEventListener("click",()=>{location.reload()});const s=document.createElement("button");s.textContent="帮助",s.style.padding="6px 12px",s.style.backgroundColor="#1890ff",s.style.color="white",s.style.border="none",s.style.borderRadius="4px",s.style.cursor="pointer",s.style.fontSize="12px",s.style.transition="background-color 0.3s",s.addEventListener("mouseover",()=>{s.style.backgroundColor="#40a9ff"}),s.addEventListener("mouseout",()=>{s.style.backgroundColor="#1890ff"}),s.addEventListener("click",()=>{alert("使用说明：\n\n1. 账号添加完成后，登录状态已保存\n2. 您可以关闭当前窗口，稍后通过账号管理页面切换到此账号\n3. 下次切换到此账号时，无需重新登录\n\n注意：请确保Chrome浏览器版本与Puppeteer兼容")}),o.appendChild(c),o.appendChild(s),t.appendChild(n),t.appendChild(a),document.body.appendChild(t)},l.videoDirectory)},"创建操作面板"),w("账号添加完成，登录状态已保存"),w("您可以关闭当前窗口，稍后通过账号管理页面切换到此账号"),await f(o,a)}catch(e){w(`程序运行出错: ${e.message}`),console.error("错误详情:",e);const t=a.join(__dirname,"error.log");try{const n=`[${(new Date).toISOString()}] 错误: ${e.message}\n堆栈跟踪: ${e.stack}\n----------------------------------------\n`;s.appendFileSync(t,n,"utf8"),w(`详细错误信息已保存至: ${t}`)}catch(e){console.error("无法保存错误日志:",e.message)}}finally{w("微信公众号自动控制器程序结束"),console.log("============================================"),console.log("  程序已结束，感谢使用微信公众号自动控制器"),console.log("============================================")}},I=async e=>{try{const t=u();t||w("警告：未能自动检测到系统Chrome路径，请确保Chrome已安装");const n=i.getAccountById(e);if(!n)return void w(`错误：找不到账号ID为 ${e} 的账号信息`);if(!s.existsSync(n.userDataDir))return void w(`错误：账号的用户数据目录不存在: ${n.userDataDir}`);w(`加载账号: ${n.name} (${n.wechatId})`);const a=await S(async()=>await c.launch({headless:l.headless,defaultViewport:null,args:["--start-maximized",`--user-data-dir=${n.userDataDir}`],executablePath:t||void 0}),"启动浏览器");a.on("disconnected",()=>{w(`${n.name} 的浏览器已关闭`),m.delete(e)});const o=await a.newPage();m.set(e,{page:o,browser:a,userDataDir:n.userDataDir}),await o.goto("https://mp.weixin.qq.com/"),await p(2e3);const r=await(async e=>{try{return!!(await e.url()).includes("token=")||(await e.waitForSelector("body",{timeout:3e3}),await e.evaluate(()=>{const e=document.querySelector("div.login_code_img");return null!==document.querySelector("#main-container")&&null===e}))}catch(e){return w(`检查登录状态时出错: ${e.message}`),!1}})(o);if(!r){w("账号登录状态已失效，请重新登录");if(!await y(o))return w("重新登录失败，程序将在10秒后退出"),await p(1e4),void(a&&a.isConnected()&&await a.close());i.updateAccountLastLogin(e)}i.updateAccountLastLogin(e),w(`账号 ${n.name} 登录成功，开始监测页面URL变化...`),await S(async()=>{await o.evaluate((e,t)=>{const n=document.createElement("div");n.id="auto-controller-panel",n.style.position="fixed",n.style.top="20px",n.style.left="20px",n.style.zIndex="9999",n.style.backgroundColor="white",n.style.border="1px solid #e7e7eb",n.style.borderRadius="8px",n.style.padding="15px",n.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.1)",n.style.maxWidth="350px",n.style.fontSize="14px",n.style.color="#333",n.style.fontFamily="-apple-system, BlinkMacSystemFont, sans-serif";const a=document.createElement("h4");a.textContent="微信公众号增强功能已加载",a.style.margin="0 0 15px 0",a.style.fontSize="16px",a.style.color="#1aad19",n.appendChild(a),document.body.appendChild(n)},n)},"创建操作面板"),await f(o,a)}catch(e){w(`切换账号时出错: ${e.message}`),console.error("错误详情:",e);const t=a.join(__dirname,"error.log");try{const n=`[${(new Date).toISOString()}] 错误: ${e.message}\n堆栈跟踪: ${e.stack}\n----------------------------------------\n`;s.appendFileSync(t,n,"utf8"),w(`详细错误信息已保存至: ${t}`)}catch(e){console.error("无法保存错误日志:",e.message)}}};!async function(){try{const e=function(){const e=process.argv.slice(2),t={action:"manage",accountId:null};for(let n=0;n<e.length;n++)"--action"===e[n]&&n+1<e.length?(t.action=e[n+1],n++):"--accountId"===e[n]&&n+1<e.length&&(t.accountId=e[n+1],n++);return t}();if(process.argv.length>2&&process.argv[2].startsWith("?")){const t=new URLSearchParams(process.argv[2].substring(1)),n=t.get("action")||e.action,a=t.get("accountId")||e.accountId;await C(n,a)}else"manage"!==e.action?await C(e.action,e.accountId):await C("manage",null)}catch(e){w(`程序执行出错: ${e.message}`),console.error(e),await p(5e3)}}(),module.exports={}})();